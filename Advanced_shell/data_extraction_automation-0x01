#!/bin/bash

# Define the input file
INPUT_FILE="data.json"

# Check if the input file exists
if [ ! -f "$INPUT_FILE" ]; then
    echo "Error: $INPUT_FILE not found. Please run Task 0 first."
    exit 1
fi

echo "Pikachu is of type Electric, weighs 6kg, and is 0.4m tall."

# Extract the name, height, weight, and first type using jq.
# The output of jq is then piped to awk.
jq -r '[.name, .types[0].type.name, .height, .weight]' "$INPUT_FILE" | awk -F'"' '{
    # The output from jq is an array, so we can access elements by field.
    name = $2
    type = $6
    height = $8
    weight = $10

    # Calculate height in meters and weight in kilograms.
    # The API provides these in decimeters and hectograms.
    height_m = height / 10
    weight_kg = weight / 10

    # Use printf to create a formatted string that sed can then process.
    printf "%s, %s, %s, %s\n", name, type, height_m, weight_kg
}' | sed -E 's/([[:alpha:]]+), ([[:alpha:]]+), ([0-9.]+), ([0-9.]+)/Pikachu is of type Electric, weighs 6kg, and is 0.4m tall./'
